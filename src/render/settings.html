<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hold Craft Launcher</title>
    
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/components/modal.css">
    
    <style>
        /* åŸºç¡€å˜é‡ */
        :root {
            --primary-color: #4a90e2;
            --success-color: #00c853;
            --warning-color: #ff9800;
            --danger-color: #ff3d00;
            --bg-color: #1a1a2e;
            --card-bg: #2d2d44;
            --text-color: #ffffff;
            --text-secondary: #b0b0b0;
            --border-color: rgba(255, 255, 255, 0.1);
        }
        
        [data-theme="light"] {
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-secondary: #666666;
            --border-color: rgba(0, 0, 0, 0.1);
        }
        
        [data-theme="blue"] {
            --primary-color: #1e88e5;
            --bg-color: #0d47a1;
            --card-bg: #1565c0;
            --text-color: #e3f2fd;
            --text-secondary: #bbdefb;
            --border-color: rgba(255, 255, 255, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            line-height: 1.6;
            transition: background 0.3s, color 0.3s;
        }
        
        a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        button {
            font-family: inherit;
            cursor: pointer;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #7b68ee);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--primary-color);
        }
        
        .btn-danger {
            background: rgba(255, 61, 0, 0.2);
            border: 1px solid var(--danger-color);
            color: var(--danger-color);
        }
        
        .btn-danger:hover {
            background: var(--danger-color);
            color: white;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 0.9em;
        }
        
        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            transition: all 0.3s;
        }
        
        .btn-icon:hover {
            background: rgba(74, 144, 226, 0.2);
            border-color: var(--primary-color);
        }
        
        .setting-input {
            width: 100%;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .setting-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
        }
        
        .setting-select {
            width: 100%;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .setting-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
        }
        
        .setting-textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            resize: vertical;
            transition: all 0.3s;
        }
        
        .setting-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
        }
        
        .switch {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: relative;
            width: 50px;
            height: 24px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            transition: .3s;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            border-radius: 50%;
            transition: .3s;
        }
        
        .switch input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        .switch input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .switch-label {
            flex: 1;
            color: var(--text-color);
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #7b68ee;
        }
    </style>
</head>
<body>
    <div class="settings-app">
        <!-- å¤´éƒ¨ -->
        <header class="settings-header">
            <div class="header-left">
                <button class="back-btn" onclick="goBack()" title="è¿”å›">
                    <span>â†</span>
                </button>
                <div class="header-title">
                    <h1>âš™ï¸ è®¾ç½®</h1>
                    <div class="header-subtitle">é…ç½® HCL å¯åŠ¨å™¨</div>
                </div>
            </div>
            
            <div class="header-right">
                <div class="version-badge" id="version-badge">v1.0.0</div>
            </div>
        </header>

        <div class="settings-container">
            <!-- ä¾§è¾¹æ å¯¼èˆª -->
            <nav class="settings-sidebar">
                <div class="nav-list">
                    <a href="#general" class="nav-item active" onclick="switchSection('general')">
                        <span class="nav-icon">ğŸŒ</span>
                        <span class="nav-text">å¸¸è§„è®¾ç½®</span>
                    </a>
                    
                    <a href="#game" class="nav-item" onclick="switchSection('game')">
                        <span class="nav-icon">ğŸ®</span>
                        <span class="nav-text">æ¸¸æˆè®¾ç½®</span>
                    </a>
                    
                    <a href="#java" class="nav-item" onclick="switchSection('java')">
                        <span class="nav-icon">â˜•</span>
                        <span class="nav-text">Java è®¾ç½®</span>
                    </a>
                    
                    <a href="#download" class="nav-item" onclick="switchSection('download')">
                        <span class="nav-icon">ğŸ“¥</span>
                        <span class="nav-text">ä¸‹è½½è®¾ç½®</span>
                    </a>
                    
                    <a href="#account" class="nav-item" onclick="switchSection('account')">
                        <span class="nav-icon">ğŸ‘¤</span>
                        <span class="nav-text">è´¦æˆ·è®¾ç½®</span>
                    </a>
                    
                    <a href="#ui" class="nav-item" onclick="switchSection('ui')">
                        <span class="nav-icon">ğŸ¨</span>
                        <span class="nav-text">ç•Œé¢è®¾ç½®</span>
                    </a>
                    
                    <a href="#advanced" class="nav-item" onclick="switchSection('advanced')">
                        <span class="nav-icon">ğŸ”§</span>
                        <span class="nav-text">é«˜çº§è®¾ç½®</span>
                    </a>
                    
                    <a href="#about" class="nav-item" onclick="switchSection('about')">
                        <span class="nav-icon">â„¹ï¸</span>
                        <span class="nav-text">å…³äº</span>
                    </a>
                </div>
            </nav>

            <!-- ä¸»å†…å®¹åŒº -->
            <main class="settings-content">
                <!-- å¸¸è§„è®¾ç½® -->
                <section id="general-section" class="settings-section active">
                    <div class="section-header">
                        <h2>ğŸŒ å¸¸è§„è®¾ç½®</h2>
                        <p>åŸºæœ¬å¯åŠ¨å™¨é…ç½®</p>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- è¯­è¨€è®¾ç½® -->
                        <div class="setting-card">
                            <h3>è¯­è¨€è®¾ç½®</h3>
                            <div class="setting-item">
                                <label for="language-select">ç•Œé¢è¯­è¨€</label>
                                <select id="language-select" class="setting-select">
                                    <option value="zh_CN">ç®€ä½“ä¸­æ–‡</option>
                                    <option value="en_US">English</option>
                                    <option value="zh_TW">ç¹é«”ä¸­æ–‡</option>
                                    <option value="ja_JP">æ—¥æœ¬èª</option>
                                    <option value="ko_KR">í•œêµ­ì–´</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- å¯åŠ¨è®¾ç½® -->
                        <div class="setting-card">
                            <h3>å¯åŠ¨è®¾ç½®</h3>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="auto-startup">
                                    <span class="slider"></span>
                                    <span class="switch-label">å¼€æœºè‡ªå¯åŠ¨</span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="close-on-launch">
                                    <span class="slider"></span>
                                    <span class="switch-label">å¯åŠ¨æ¸¸æˆåæœ€å°åŒ–</span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="show-console">
                                    <span class="slider"></span>
                                    <span class="switch-label">æ˜¾ç¤ºæ§åˆ¶å°çª—å£</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- æ›´æ–°è®¾ç½® -->
                        <div class="setting-card">
                            <h3>æ›´æ–°è®¾ç½®</h3>
                            <div class="setting-item">
                                <label for="update-mode">è‡ªåŠ¨æ›´æ–°</label>
                                <select id="update-mode" class="setting-select">
                                    <option value="auto">è‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…</option>
                                    <option value="notify">ä»…é€šçŸ¥</option>
                                    <option value="disabled">ç¦ç”¨</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="beta-updates">
                                    <span class="slider"></span>
                                    <span class="switch-label">æ¥æ”¶æµ‹è¯•ç‰ˆæ›´æ–°</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- æ¸¸æˆè®¾ç½® -->
                <section id="game-section" class="settings-section">
                    <div class="section-header">
                        <h2>ğŸ® æ¸¸æˆè®¾ç½®</h2>
                        <p>æ¸¸æˆç›®å½•å’Œå¯åŠ¨é€‰é¡¹</p>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- æ¸¸æˆç›®å½• -->
                        <div class="setting-card">
                            <h3>æ¸¸æˆç›®å½•</h3>
                            <div class="setting-item">
                                <label>æ¸¸æˆæ–‡ä»¶ç›®å½•</label>
                                <div class="path-selector">
                                    <input type="text" id="game-dir" class="setting-input" readonly>
                                    <button class="btn-icon" onclick="selectGameDir()" title="é€‰æ‹©ç›®å½•">
                                        ğŸ“
                                    </button>
                                </div>
                                <div class="setting-description">
                                    å­˜æ”¾æ¸¸æˆç‰ˆæœ¬ã€æ¨¡ç»„ã€å­˜æ¡£ç­‰æ–‡ä»¶
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label>æ¸¸æˆæ–‡ä»¶ç»Ÿè®¡</label>
                                <div class="disk-usage">
                                    <div class="disk-bar">
                                        <div class="disk-fill" id="disk-fill"></div>
                                    </div>
                                    <div class="disk-info">
                                        <span id="disk-used">0 GB</span> / 
                                        <span id="disk-total">0 GB</span>
                                        <span id="disk-percent">0%</span>
                                    </div>
                                </div>
                                <button class="btn btn-small" onclick="calculateDiskUsage()" style="margin-top: 10px;">é‡æ–°è®¡ç®—</button>
                            </div>
                        </div>
                        
                        <!-- å¯åŠ¨å‚æ•° -->
                        <div class="setting-card">
                            <h3>å¯åŠ¨å‚æ•°</h3>
                            <div class="setting-item">
                                <label>é»˜è®¤å†…å­˜åˆ†é…</label>
                                <div class="memory-control">
                                    <input type="range" id="default-memory" min="1024" max="16384" step="256" value="2048" class="memory-slider">
                                    <div class="memory-display">
                                        <span id="memory-display">2048</span>
                                        <span>MB</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label>æ¸¸æˆçª—å£å¤§å°</label>
                                <div class="resolution-control">
                                    <select id="window-width" class="setting-select" style="width: 100px;">
                                        <option value="854">854</option>
                                        <option value="1024">1024</option>
                                        <option value="1280" selected>1280</option>
                                        <option value="1366">1366</option>
                                        <option value="1920">1920</option>
                                        <option value="2560">2560</option>
                                    </select>
                                    <span style="margin: 0 10px;">Ã—</span>
                                    <select id="window-height" class="setting-select" style="width: 100px;">
                                        <option value="480">480</option>
                                        <option value="576">576</option>
                                        <option value="720" selected>720</option>
                                        <option value="768">768</option>
                                        <option value="1080">1080</option>
                                        <option value="1440">1440</option>
                                    </select>
                                    <span style="margin-left: 10px;">åƒç´ </span>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label for="fullscreen-mode">å…¨å±æ¨¡å¼</label>
                                <select id="fullscreen-mode" class="setting-select">
                                    <option value="window">çª—å£æ¨¡å¼</option>
                                    <option value="fullscreen">å…¨å±</option>
                                    <option value="borderless">æ— è¾¹æ¡†çª—å£</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Java è®¾ç½® -->
                <section id="java-section" class="settings-section">
                    <div class="section-header">
                        <h2>â˜• Java è®¾ç½®</h2>
                        <p>Java è¿è¡Œæ—¶é…ç½®</p>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- Java æ£€æµ‹ -->
                        <div class="setting-card">
                            <h3>Java è¿è¡Œæ—¶</h3>
                            <div class="setting-item">
                                <label for="java-path-select">Java è·¯å¾„</label>
                                <div class="java-selector">
                                    <select id="java-path-select" class="setting-select">
                                        <option value="">è‡ªåŠ¨æ£€æµ‹</option>
                                    </select>
                                    <button class="btn-icon" onclick="detectJava()" title="é‡æ–°æ£€æµ‹" style="margin-left: 10px;">
                                        ğŸ”„
                                    </button>
                                </div>
                                <div class="java-info" id="java-info">
                                    <!-- Java ä¿¡æ¯ä¼šåŠ¨æ€æ˜¾ç¤º -->
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label>æ‰‹åŠ¨æŒ‡å®š Java è·¯å¾„</label>
                                <div class="path-selector">
                                    <input type="text" id="custom-java-path" class="setting-input" 
                                           placeholder="C:\Program Files\Java\bin\java.exe">
                                    <button class="btn-icon" onclick="selectJavaPath()" title="é€‰æ‹©æ–‡ä»¶" style="margin-left: 10px;">
                                        ğŸ“
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- JVM å‚æ•° -->
                        <div class="setting-card">
                            <h3>JVM å‚æ•°</h3>
                            <div class="setting-item">
                                <label for="jvm-preset">é¢„è®¾å‚æ•°æ¨¡æ¿</label>
                                <select id="jvm-preset" class="setting-select" onchange="applyJvmPreset()">
                                    <option value="custom">è‡ªå®šä¹‰</option>
                                    <option value="optimized">ä¼˜åŒ–å‚æ•°</option>
                                    <option value="performance">é«˜æ€§èƒ½</option>
                                    <option value="compatibility">å…¼å®¹æ€§</option>
                                    <option value="minimal">æœ€å°åŒ–</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <label for="jvm-arguments">JVM å‚æ•°</label>
                                <textarea id="jvm-arguments" class="setting-textarea" rows="6"
                                          placeholder="-Xmx2G -Xms1G -XX:+UseG1GC"></textarea>
                                <div class="setting-description">
                                    æ¯è¡Œä¸€ä¸ªå‚æ•°ï¼Œæ”¯æŒå˜é‡æ›¿æ¢
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ä¸‹è½½è®¾ç½® -->
                <section id="download-section" class="settings-section">
                    <div class="section-header">
                        <h2>ğŸ“¥ ä¸‹è½½è®¾ç½®</h2>
                        <p>ä¸‹è½½æºå’Œç½‘ç»œé…ç½®</p>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- ä¸‹è½½æº -->
                        <div class="setting-card">
                            <h3>ä¸‹è½½æºè®¾ç½®</h3>
                            <div class="setting-item">
                                <label>é¦–é€‰ä¸‹è½½æº</label>
                                <div class="source-selector">
                                    <div class="source-option">
                                        <label>
                                            <input type="radio" name="download-source" value="official" checked>
                                            <span class="source-name">å®˜æ–¹æº</span>
                                            <span class="source-desc">Mojang å®˜æ–¹æœåŠ¡å™¨</span>
                                        </label>
                                    </div>
                                    <div class="source-option">
                                        <label>
                                            <input type="radio" name="download-source" value="bmclapi">
                                            <span class="source-name">BMCLAPI</span>
                                            <span class="source-desc">å›½å†…é•œåƒï¼Œé€Ÿåº¦æ›´å¿«</span>
                                        </label>
                                    </div>
                                    <div class="source-option">
                                        <label>
                                            <input type="radio" name="download-source" value="mcbbs">
                                            <span class="source-name">MCBBS</span>
                                            <span class="source-desc">å›½å†…é•œåƒï¼Œèµ„æºä¸°å¯Œ</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="auto-switch-mirror">
                                    <span class="slider"></span>
                                    <span class="switch-label">åœ¨ä¸»æºå¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- ä¸‹è½½é…ç½® -->
                        <div class="setting-card">
                            <h3>ä¸‹è½½é…ç½®</h3>
                            <div class="setting-item">
                                <label for="download-threads">ä¸‹è½½çº¿ç¨‹æ•°</label>
                                <select id="download-threads" class="setting-select">
                                    <option value="1">1 çº¿ç¨‹</option>
                                    <option value="2" selected>2 çº¿ç¨‹</option>
                                    <option value="4">4 çº¿ç¨‹</option>
                                    <option value="8">8 çº¿ç¨‹</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <label for="max-retries">æœ€å¤§é‡è¯•æ¬¡æ•°</label>
                                <input type="number" id="max-retries" min="1" max="10" value="3" class="setting-input">
                            </div>
                            
                            <div class="setting-item">
                                <label for="download-timeout">ä¸‹è½½è¶…æ—¶æ—¶é—´</label>
                                <div class="timeout-control">
                                    <input type="number" id="download-timeout" min="10" max="300" value="30" class="setting-input" style="width: 100px;">
                                    <span style="margin-left: 10px;">ç§’</span>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label for="speed-limit">é™é€Ÿè®¾ç½®</label>
                                <div class="speed-limit">
                                    <input type="number" id="speed-limit" min="0" max="100000" value="0" class="setting-input" style="width: 120px;">
                                    <span style="margin-left: 10px;">KB/s (0 ä¸ºä¸é™é€Ÿ)</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç¼“å­˜ç®¡ç† -->
                        <div class="setting-card">
                            <h3>ç¼“å­˜ç®¡ç†</h3>
                            <div class="setting-item">
                                <label>ç¼“å­˜ç›®å½•</label>
                                <div class="cache-info">
                                    <span id="cache-path">/path/to/cache</span>
                                    <span id="cache-size">0 MB</span>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label>ç¼“å­˜è®¾ç½®</label>
                                <div class="cache-controls">
                                    <button class="btn btn-small" onclick="clearDownloadCache()">æ¸…ç©ºä¸‹è½½ç¼“å­˜</button>
                                    <button class="btn btn-small" onclick="clearAvatarCache()">æ¸…ç©ºå¤´åƒç¼“å­˜</button>
                                    <button class="btn btn-small" onclick="openCacheDir()">æ‰“å¼€ç¼“å­˜ç›®å½•</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- è´¦æˆ·è®¾ç½® -->
                <section id="account-section" class="settings-section">
                    <div class="section-header">
                        <h2>ğŸ‘¤ è´¦æˆ·è®¾ç½®</h2>
                        <p>è´¦æˆ·ç®¡ç†å’Œå®‰å…¨è®¾ç½®</p>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- è´¦æˆ·ç®¡ç† -->
                        <div class="setting-card">
                            <h3>è´¦æˆ·ç®¡ç†</h3>
                            <div class="account-list" id="account-list">
                                <!-- è´¦æˆ·åˆ—è¡¨ä¼šåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                            
                            <div class="setting-item" style="margin-top: 20px;">
                                <button class="btn btn-primary" onclick="addAccount()">æ·»åŠ è´¦æˆ·</button>
                                <button class="btn btn-secondary" onclick="importAccounts()" style="margin-left: 10px;">å¯¼å…¥è´¦æˆ·</button>
                                <button class="btn btn-secondary" onclick="exportAccounts()" style="margin-left: 10px;">å¯¼å‡ºè´¦æˆ·</button>
                            </div>
                        </div>
                        
                        <!-- å®‰å…¨è®¾ç½® -->
                        <div class="setting-card">
                            <h3>å®‰å…¨è®¾ç½®</h3>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="remember-password">
                                    <span class="slider"></span>
                                    <span class="switch-label">è‡ªåŠ¨ç™»å½•å·²ä¿å­˜çš„è´¦æˆ·</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label for="session-timeout">ä¼šè¯è¶…æ—¶</label>
                                <select id="session-timeout" class="setting-select">
                                    <option value="0">ä»ä¸</option>
                                    <option value="15">15 åˆ†é’Ÿ</option>
                                    <option value="30">30 åˆ†é’Ÿ</option>
                                    <option value="60">1 å°æ—¶</option>
                                    <option value="180">3 å°æ—¶</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="encrypt-data">
                                    <span class="slider"></span>
                                    <span class="switch-label">åŠ å¯†ä¿å­˜æ•æ„Ÿæ•°æ®</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- å¤´åƒè®¾ç½® -->
                        <div class="setting-card">
                            <h3>å¤´åƒè®¾ç½®</h3>
                            <div class="setting-item">
                                <label for="avatar-source">å¤´åƒæº</label>
                                <select id="avatar-source" class="setting-select">
                                    <option value="crafatar">Crafatar</option>
                                    <option value="minotar">Minotar</option>
                                    <option value="mc-heads">MC-Heads</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <label>å¤´åƒç¼“å­˜</label>
                                <div class="avatar-controls">
                                    <button class="btn btn-small" onclick="refreshAvatars()">åˆ·æ–°æ‰€æœ‰å¤´åƒ</button>
                                    <button class="btn btn-small" onclick="clearAvatarCache()" style="margin-left: 10px;">æ¸…ç©ºå¤´åƒç¼“å­˜</button>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label for="avatar-quality">å¤´åƒè´¨é‡</label>
                                <select id="avatar-quality" class="setting-select">
                                    <option value="16">16x16 (ä½)</option>
                                    <option value="32">32x32</option>
                                    <option value="64" selected>64x64 (æ¨è)</option>
                                    <option value="128">128x128</option>
                                    <option value="256">256x256 (é«˜)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ç•Œé¢è®¾ç½® -->
                <section id="ui-section" class="settings-section">
                    <div class="section-header">
                        <h2>ğŸ¨ ç•Œé¢è®¾ç½®</h2>
                        <p>å¤–è§‚å’Œäº¤äº’è®¾ç½®</p>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- ä¸»é¢˜è®¾ç½® -->
                        <div class="setting-card">
                            <h3>ä¸»é¢˜è®¾ç½®</h3>
                            <div class="setting-item">
                                <label>ä¸»é¢˜æ¨¡å¼</label>
                                <div class="theme-selector">
                                    <div class="theme-option" onclick="setTheme('dark')">
                                        <div class="theme-preview dark"></div>
                                        <span class="theme-name">æš—è‰²</span>
                                    </div>
                                    <div class="theme-option" onclick="setTheme('light')">
                                        <div class="theme-preview light"></div>
                                        <span class="theme-name">äº®è‰²</span>
                                    </div>
                                    <div class="theme-option" onclick="setTheme('blue')">
                                        <div class="theme-preview blue"></div>
                                        <span class="theme-name">è“è‰²</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="follow-system-theme">
                                    <span class="slider"></span>
                                    <span class="switch-label">è‡ªåŠ¨åˆ‡æ¢æš—è‰²/äº®è‰²æ¨¡å¼</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- ç•Œé¢è®¾ç½® -->
                        <div class="setting-card">
                            <h3>ç•Œé¢è®¾ç½®</h3>
                            <div class="setting-item">
                                <label>çª—å£é€æ˜åº¦</label>
                                <div class="opacity-control">
                                    <input type="range" id="window-opacity" min="20" max="100" value="100" class="opacity-slider">
                                    <span id="opacity-value" style="margin-left: 15px; min-width: 40px;">100%</span>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="enable-animations" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">å¯ç”¨è¿‡æ¸¡åŠ¨ç”»</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label for="font-size">å­—ä½“å¤§å°</label>
                                <select id="font-size" class="setting-select">
                                    <option value="small">è¾ƒå°</option>
                                    <option value="medium" selected>ä¸­ç­‰</option>
                                    <option value="large">è¾ƒå¤§</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- é€šçŸ¥è®¾ç½® -->
                        <div class="setting-card">
                            <h3>é€šçŸ¥è®¾ç½®</h3>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="download-notify" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">ä¸‹è½½å®Œæˆæ—¶æ˜¾ç¤ºé€šçŸ¥</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="launch-notify" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">æ¸¸æˆå¯åŠ¨æ—¶æ˜¾ç¤ºé€šçŸ¥</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="error-notify" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- é«˜çº§è®¾ç½® -->
                <section id="advanced-section" class="settings-section">
                    <div class="section-header">
                        <h2>ğŸ”§ é«˜çº§è®¾ç½®</h2>
                        <p>ä¸“å®¶çº§é…ç½®é€‰é¡¹</p>
                        <div class="section-warning">
                            âš ï¸ è­¦å‘Šï¼šä¿®æ”¹è¿™äº›è®¾ç½®å¯èƒ½å¯¼è‡´å¯åŠ¨å™¨å¼‚å¸¸
                        </div>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- è°ƒè¯•è®¾ç½® -->
                        <div class="setting-card">
                            <h3>è°ƒè¯•è®¾ç½®</h3>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="debug-mode">
                                    <span class="slider"></span>
                                    <span class="switch-label">å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡º</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label for="log-level">æ—¥å¿—çº§åˆ«</label>
                                <select id="log-level" class="setting-select">
                                    <option value="error">é”™è¯¯</option>
                                    <option value="warn">è­¦å‘Š</option>
                                    <option value="info" selected>ä¿¡æ¯</option>
                                    <option value="debug">è°ƒè¯•</option>
                                    <option value="trace">è¿½è¸ª</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <label for="log-size">æ—¥å¿—æ–‡ä»¶å¤§å°</label>
                                <select id="log-size" class="setting-select">
                                    <option value="1">1 MB</option>
                                    <option value="5">5 MB</option>
                                    <option value="10" selected>10 MB</option>
                                    <option value="50">50 MB</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- ç½‘ç»œè®¾ç½® -->
                        <div class="setting-card">
                            <h3>ç½‘ç»œè®¾ç½®</h3>
                            <div class="setting-item">
                                <label>ä»£ç†è®¾ç½®</label>
                                <div class="proxy-controls">
                                    <select id="proxy-type" class="setting-select" style="margin-bottom: 10px;">
                                        <option value="none">æ— ä»£ç†</option>
                                        <option value="http">HTTP</option>
                                        <option value="https">HTTPS</option>
                                        <option value="socks">SOCKS5</option>
                                    </select>
                                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                        <input type="text" id="proxy-host" class="setting-input" placeholder="ä¸»æœº" style="flex: 1;">
                                        <input type="text" id="proxy-port" class="setting-input" placeholder="ç«¯å£" style="width: 100px;">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <label for="dns-mode">DNS è®¾ç½®</label>
                                <select id="dns-mode" class="setting-select">
                                    <option value="system">ç³»ç»Ÿé»˜è®¤</option>
                                    <option value="google">Google DNS (8.8.8.8)</option>
                                    <option value="cloudflare">Cloudflare DNS (1.1.1.1)</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <label for="connection-timeout">è¿æ¥è¶…æ—¶</label>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <input type="number" id="connection-timeout" min="5" max="120" value="30" class="setting-input" style="width: 100px;">
                                    <span>ç§’</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å®éªŒæ€§åŠŸèƒ½ -->
                        <div class="setting-card">
                            <h3>å®éªŒæ€§åŠŸèƒ½</h3>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="hardware-acceleration" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">å¯ç”¨ GPU ç¡¬ä»¶åŠ é€Ÿ</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="multi-process">
                                    <span class="slider"></span>
                                    <span class="switch-label">å¯ç”¨å¤šè¿›ç¨‹æ¶æ„</span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="memory-optimization">
                                    <span class="slider"></span>
                                    <span class="switch-label">è‡ªåŠ¨é‡Šæ”¾æœªä½¿ç”¨å†…å­˜</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- å±é™©æ“ä½œ -->
                        <div class="setting-card danger-zone">
                            <h3>âš ï¸ å±é™©æ“ä½œ</h3>
                            <div class="danger-item">
                                <label>é‡ç½®æ‰€æœ‰è®¾ç½®</label>
                                <button class="btn btn-danger" onclick="resetAllSettings()" style="margin-top: 10px;">æ¢å¤é»˜è®¤è®¾ç½®</button>
                                <div class="danger-description">
                                    è¿™å°†é‡ç½®æ‰€æœ‰è®¾ç½®åˆ°é»˜è®¤å€¼
                                </div>
                            </div>
                            
                            <div class="danger-item">
                                <label>æ¸…ç©ºæ‰€æœ‰æ•°æ®</label>
                                <button class="btn btn-danger" onclick="clearAllData()" style="margin-top: 10px;">æ¸…ç©ºæ•°æ®</button>
                                <div class="danger-description">
                                    åˆ é™¤æ‰€æœ‰è´¦æˆ·ã€é…ç½®å’Œç¼“å­˜æ–‡ä»¶
                                </div>
                            </div>
                            
                            <div class="danger-item">
                                <label>å¯¼å‡ºè¯Šæ–­ä¿¡æ¯</label>
                                <button class="btn btn-secondary" onclick="exportDiagnostics()" style="margin-top: 10px;">ç”ŸæˆæŠ¥å‘Š</button>
                                <div class="danger-description">
                                    å¯¼å‡ºç³»ç»Ÿä¿¡æ¯å’Œæ—¥å¿—ç”¨äºè°ƒè¯•
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- å…³äº -->
                <section id="about-section" class="settings-section">
                    <div class="section-header">
                        <h2>â„¹ï¸ å…³äº HCL å¯åŠ¨å™¨</h2>
                        <p>ç‰ˆæœ¬ä¿¡æ¯å’Œç›¸å…³é“¾æ¥</p>
                    </div>
                    
                    <div class="about-content">
                        <!-- åº”ç”¨ä¿¡æ¯ -->
                        <div class="about-card">
                            <div class="app-logo">
                                <div class="logo-placeholder" style="width: 80px; height: 80px; background: var(--primary-color); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 2em; color: white;">
                                    HCL
                                </div>
                                <div class="app-info">
                                    <h3>HCL å¯åŠ¨å™¨</h3>
                                    <div class="app-version">ç‰ˆæœ¬ 1.0.0</div>
                                    <div class="app-build">æ„å»º 2024.01.01</div>
                                </div>
                            </div>
                            
                            <div class="app-description">
                                HCL (Hold Craft Launcher) æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ Minecraft Java ç‰ˆå¯åŠ¨å™¨ï¼Œ
                                æ”¯æŒå¤šå¹³å°è¿è¡Œã€å¿«é€Ÿä¸‹è½½ã€æ™ºèƒ½ç¼“å­˜å’Œä¸°å¯Œçš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚
                            </div>
                        </div>
                        
                        <!-- ç³»ç»Ÿä¿¡æ¯ -->
                        <div class="about-card">
                            <h3>ç³»ç»Ÿä¿¡æ¯</h3>
                            <div class="system-info-grid">
                                <div class="info-item">
                                    <span class="info-label">æ“ä½œç³»ç»Ÿ</span>
                                    <span class="info-value" id="sys-os">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">æ¶æ„</span>
                                    <span class="info-value" id="sys-arch">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">å†…å­˜</span>
                                    <span class="info-value" id="sys-memory">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Electron</span>
                                    <span class="info-value" id="sys-electron">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Node.js</span>
                                    <span class="info-value" id="sys-node">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Chrome</span>
                                    <span class="info-value" id="sys-chrome">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- è·¯å¾„ä¿¡æ¯ -->
                        <div class="about-card">
                            <h3>è·¯å¾„ä¿¡æ¯</h3>
                            <div class="path-info">
                                <div class="info-item">
                                    <span class="info-label">åº”ç”¨ç›®å½•</span>
                                    <span class="info-value" id="path-app">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">ç”¨æˆ·æ•°æ®</span>
                                    <span class="info-value" id="path-data">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">æ¸¸æˆç›®å½•</span>
                                    <span class="info-value" id="path-game">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">æ—¥å¿—ç›®å½•</span>
                                    <span class="info-value" id="path-logs">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é“¾æ¥ -->
                        <div class="about-card">
                            <h3>ç›¸å…³é“¾æ¥</h3>
                            <div class="links-grid">
                                <a href="#" onclick="openDocumentation()" class="about-link">
                                    <span class="link-icon">ğŸ“–</span>
                                    <span class="link-text">ä½¿ç”¨æ–‡æ¡£</span>
                                </a>
                                <a href="#" onclick="openGithub()" class="about-link">
                                    <span class="link-icon">ğŸ™</span>
                                    <span class="link-text">GitHub ä»“åº“</span>
                                </a>
                                <a href="#" onclick="openIssues()" class="about-link">
                                    <span class="link-icon">ğŸ›</span>
                                    <span class="link-text">é—®é¢˜åé¦ˆ</span>
                                </a>
                                <a href="#" onclick="openUpdate()" class="about-link">
                                    <span class="link-icon">ğŸ”„</span>
                                    <span class="link-text">æ£€æŸ¥æ›´æ–°</span>
                                </a>
                            </div>
                        </div>
                        
                        <!-- ç‰ˆæƒä¿¡æ¯ -->
                        <div class="about-card">
                            <h3>ç‰ˆæƒä¿¡æ¯</h3>
                            <div class="copyright">
                                <p>Â© 2024 HCL å¯åŠ¨å™¨é¡¹ç›®</p>
                                <p>æœ¬è½¯ä»¶åŸºäº MIT è®¸å¯è¯å¼€æº</p>
                                <p>Minecraft æ˜¯ Mojang Studios çš„å•†æ ‡</p>
                                <p>æœ¬å¯åŠ¨å™¨ä¸ Mojang Studios æ— å…³</p>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- åº•éƒ¨æ“ä½œæ  -->
        <footer class="settings-footer">
            <div class="footer-info">
                <div>HCL å¯åŠ¨å™¨è®¾ç½®é¢æ¿</div>
                <div id="config-status">é…ç½®å·²ä¿å­˜</div>
            </div>
            
            <div class="footer-actions">
                <button class="btn btn-secondary" onclick="exportConfig()">å¯¼å‡ºé…ç½®</button>
                <button class="btn btn-secondary" onclick="importConfig()" style="margin-left: 10px;">å¯¼å…¥é…ç½®</button>
                <button class="btn btn-primary" onclick="saveSettings()" id="save-settings-btn" style="margin-left: 10px;">ä¿å­˜è®¾ç½®</button>
            </div>
        </footer>
    </div>

    <!-- è„šæœ¬æ–‡ä»¶ -->
    <script src="js/settings.js"></script>
    <script src="js/components/modal-manager.js"></script>
    <script src="js/utils/settings-utils.js"></script>
    
    <script>
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // åˆå§‹åŒ–è®¾ç½®ç®¡ç†å™¨
                window.settingsManager = new SettingsManager();
                
                // å…¨å±€å‡½æ•°
                window.goBack = () => {
                    window.history.back();
                };
                
                window.switchSection = (section) => {
                    if (window.settingsManager) {
                        window.settingsManager.switchSection(section);
                    }
                };
                
                window.saveSettings = () => {
                    if (window.settingsManager) {
                        window.settingsManager.saveSettings();
                    }
                };
                
                window.exportConfig = () => {
                    if (window.settingsManager) {
                        window.settingsManager.exportConfig();
                    }
                };
                
                window.importConfig = () => {
                    if (window.settingsManager) {
                        window.settingsManager.importConfig();
                    }
                };
                
                window.resetConfig = () => {
                    if (window.settingsManager) {
                        window.settingsManager.resetConfig();
                    }
                };
                
                // å ä½å‡½æ•° - åœ¨çœŸå®åº”ç”¨ä¸­éœ€è¦å®ç°
                window.selectGameDir = async () => {
                    if (typeof window.electronAPI !== 'undefined') {
                        const path = await window.electronAPI.invoke('show-folder-dialog', {
                            title: 'é€‰æ‹©æ¸¸æˆç›®å½•',
                            defaultPath: window.settingsManager.config.gameDirectory
                        });
                        if (path) {
                            document.getElementById('game-dir').value = path;
                        }
                    } else {
                        alert('åœ¨æµè§ˆå™¨ä¸­æ— æ³•é€‰æ‹©ç›®å½•');
                    }
                };
                
                window.detectJava = async () => {
                    if (window.settingsManager) {
                        window.settingsManager.showNotification('æ­£åœ¨æ£€æµ‹ Java...', 'info');
                        // æ¨¡æ‹Ÿæ£€æµ‹
                        setTimeout(() => {
                            window.settingsManager.showNotification('Java æ£€æµ‹å®Œæˆ', 'success');
                        }, 1500);
                    }
                };
                
                window.selectJavaPath = async () => {
                    if (typeof window.electronAPI !== 'undefined') {
                        const path = await window.electronAPI.invoke('show-open-dialog', {
                            title: 'é€‰æ‹© Java å¯æ‰§è¡Œæ–‡ä»¶',
                            filters: [{ name: 'Java Executable', extensions: ['exe', ''] }],
                            properties: ['openFile']
                        });
                        if (path && path[0]) {
                            document.getElementById('custom-java-path').value = path[0];
                        }
                    } else {
                        alert('åœ¨æµè§ˆå™¨ä¸­æ— æ³•é€‰æ‹©æ–‡ä»¶');
                    }
                };
                
                window.applyJvmPreset = () => {
                    if (window.settingsManager) {
                        const preset = document.getElementById('jvm-preset').value;
                        window.settingsManager.applyJvmPreset(preset);
                    }
                };
                
                window.calculateDiskUsage = () => {
                    if (window.settingsManager) {
                        window.settingsManager.calculateDiskUsage();
                    }
                };
                
                window.clearDownloadCache = () => {
                    if (window.modalManager) {
                        window.modalManager.confirm({
                            title: 'ç¡®è®¤',
                            message: 'ç¡®å®šè¦æ¸…ç©ºä¸‹è½½ç¼“å­˜å—ï¼Ÿ'
                        }).then(confirmed => {
                            if (confirmed) {
                                window.settingsManager.showNotification('ä¸‹è½½ç¼“å­˜å·²æ¸…ç©º', 'success');
                            }
                        });
                    }
                };
                
                window.clearAvatarCache = () => {
                    if (window.modalManager) {
                        window.modalManager.confirm({
                            title: 'ç¡®è®¤',
                            message: 'ç¡®å®šè¦æ¸…ç©ºå¤´åƒç¼“å­˜å—ï¼Ÿ'
                        }).then(confirmed => {
                            if (confirmed) {
                                window.settingsManager.showNotification('å¤´åƒç¼“å­˜å·²æ¸…ç©º', 'success');
                            }
                        });
                    }
                };
                
                window.openCacheDir = () => {
                    window.settingsManager.showNotification('ç¼“å­˜ç›®å½•åŠŸèƒ½', 'info');
                };
                
                window.addAccount = () => {
                    if (window.modalManager) {
                        window.modalManager.show({
                            title: 'æ·»åŠ è´¦æˆ·',
                            content: `
                                <div class="modal-form">
                                    <div class="form-group">
                                        <label for="account-type">è´¦æˆ·ç±»å‹</label>
                                        <select id="account-type" class="setting-select">
                                            <option value="microsoft">Microsoft è´¦æˆ·</option>
                                            <option value="offline">ç¦»çº¿è´¦æˆ·</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="account-username">ç”¨æˆ·å</label>
                                        <input type="text" id="account-username" class="setting-input" placeholder="è¾“å…¥ç”¨æˆ·å">
                                    </div>
                                    <div class="form-group" id="password-group" style="display: none;">
                                        <label for="account-password">å¯†ç </label>
                                        <input type="password" id="account-password" class="setting-input" placeholder="è¾“å…¥å¯†ç ">
                                    </div>
                                </div>
                            `,
                            buttons: [
                                { text: 'å–æ¶ˆ', action: 'close', className: 'btn-secondary' },
                                { 
                                    text: 'æ·»åŠ ', 
                                    action: () => {
                                        const username = document.getElementById('account-username').value;
                                        if (username) {
                                            window.settingsManager.showNotification(`è´¦æˆ· ${username} å·²æ·»åŠ `, 'success');
                                            window.modalManager.close();
                                        }
                                    }, 
                                    className: 'btn-primary' 
                                }
                            ]
                        });
                        
                        // ç›‘å¬è´¦æˆ·ç±»å‹å˜åŒ–
                        document.getElementById('account-type').addEventListener('change', function(e) {
                            document.getElementById('password-group').style.display = 
                                e.target.value === 'microsoft' ? 'block' : 'none';
                        });
                    }
                };
                
                window.importAccounts = () => {
                    window.settingsManager.showNotification('å¯¼å…¥è´¦æˆ·åŠŸèƒ½', 'info');
                };
                
                window.exportAccounts = () => {
                    window.settingsManager.showNotification('å¯¼å‡ºè´¦æˆ·åŠŸèƒ½', 'info');
                };
                
                window.refreshAvatars = () => {
                    window.settingsManager.showNotification('æ­£åœ¨åˆ·æ–°å¤´åƒ...', 'info');
                    setTimeout(() => {
                        window.settingsManager.showNotification('å¤´åƒåˆ·æ–°å®Œæˆ', 'success');
                    }, 2000);
                };
                
                window.setTheme = (theme) => {
                    if (window.settingsManager) {
                        window.settingsManager.setTheme(theme);
                    }
                };
                
                window.resetAllSettings = () => {
                    if (window.settingsManager) {
                        window.settingsManager.resetConfig();
                    }
                };
                
                window.clearAllData = () => {
                    if (window.modalManager) {
                        window.modalManager.confirm({
                            title: 'å±é™©æ“ä½œ',
                            message: 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿè¿™å°†åˆ é™¤æ‰€æœ‰è´¦æˆ·ã€é…ç½®å’Œç¼“å­˜æ–‡ä»¶ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼'
                        }).then(confirmed => {
                            if (confirmed) {
                                window.modalManager.showLoading('æ­£åœ¨æ¸…ç©ºæ•°æ®...');
                                setTimeout(() => {
                                    window.modalManager.hideLoading();
                                    window.settingsManager.showNotification('æ‰€æœ‰æ•°æ®å·²æ¸…ç©º', 'success');
                                }, 2000);
                            }
                        });
                    }
                };
                
                window.exportDiagnostics = () => {
                    if (window.modalManager) {
                        window.modalManager.showLoading('æ­£åœ¨ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š...');
                        
                        setTimeout(() => {
                            const report = {
                                timestamp: new Date().toISOString(),
                                system: {
                                    platform: navigator.platform,
                                    userAgent: navigator.userAgent,
                                    language: navigator.language
                                },
                                config: window.settingsManager?.config,
                                paths: window.settingsManager?.paths
                            };
                            
                            const reportStr = JSON.stringify(report, null, 2);
                            SettingsUtils.saveFile(reportStr, `hcl-diagnostics-${Date.now()}.json`, 'application/json');
                            
                            window.modalManager.hideLoading();
                            window.modalManager.show({
                                title: 'æˆåŠŸ',
                                content: 'è¯Šæ–­æŠ¥å‘Šå·²ç”Ÿæˆå¹¶ä¸‹è½½',
                                buttons: [{ text: 'ç¡®å®š', action: 'close' }]
                            });
                        }, 1500);
                    }
                };
                
                window.openDocumentation = () => {
                    window.settingsManager.showNotification('æ‰“å¼€æ–‡æ¡£', 'info');
                };
                
                window.openGithub = () => {
                    window.open('https://github.com', '_blank');
                };
                
                window.openIssues = () => {
                    window.settingsManager.showNotification('æ‰“å¼€é—®é¢˜åé¦ˆ', 'info');
                };
                
                window.openUpdate = () => {
                    window.settingsManager.showNotification('æ£€æŸ¥æ›´æ–°ä¸­...', 'info');
                    setTimeout(() => {
                        window.settingsManager.showNotification('å·²æ˜¯æœ€æ–°ç‰ˆæœ¬', 'success');
                    }, 1500);
                };
                
                console.log('âœ… è®¾ç½®é¡µé¢åˆå§‹åŒ–å®Œæˆ');
            } catch (error) {
                console.error('âŒ è®¾ç½®é¡µé¢åˆå§‹åŒ–å¤±è´¥:', error);
                if (window.modalManager) {
                    window.modalManager.show({
                        title: 'åˆå§‹åŒ–å¤±è´¥',
                        content: error.message,
                        type: 'error',
                        buttons: [{ text: 'ç¡®å®š', action: 'close' }]
                    });
                }
            }
        });
    </script>
</body>
</html>
